--[[
 .____                  ________ ___.    _____                           __                
 |    |    __ _______   \_____  \\_ |___/ ____\_ __  ______ ____ _____ _/  |_  ___________ 
 |    |   |  |  \__  \   /   |   \| __ \   __\  |  \/  ___// ___\\__  \\   __\/  _ \_  __ \
 |    |___|  |  // __ \_/    |    \ \_\ \  | |  |  /\___ \\  \___ / __ \|  | (  <_> )  | \/
 |_______ \____/(____  /\_______  /___  /__| |____//____  >\___  >____  /__|  \____/|__|   
         \/          \/         \/    \/                \/     \/     \/                   
          \_Welcome to LuaObfuscator.com   (Alpha 0.10.3) ~  Much Love, Ferib 

]]--

path_settings={};path_settings.table_coordinates={INI={x=619 -(259 + 160) ,y=743 -(215 + 328) },S6={x=182 + 1818 ,y=101 + 99 },S1={x=502 -252 ,y=577 -427 },S1EO={x=892 -(416 + 26) ,y=0 -0 },S1ER={x=194 + 256 ,y=212 -92 },A8={x=938 -(145 + 293) ,y=400},P6B={x=1930 -(44 + 386) ,y=1886 -(998 + 488) }};path_settings.edges={INI={"S6","A8"},S6={"INI","P6B"},A8={"INI","P6B"},P6B={"S6","A8"}};config={};config.MATCH_DURATION_MS=87000;config.DEFAULT_LOOP_PERIOD_MS=50;config.ENNEMY_RADIUS_MM=118 + 82 ;config.SCAN_DURATION_MS=1204 -874 ;config.US_DECAY_TIME_MS=1775 -1275 ;config.OVERSHOOT_MM=100;config.ROBOT_CENTER_Y_BOTTOM=1059 -(814 + 45) ;config.PANEL_ARM_TIMEOUT_MS=615 -365 ;config.theta_pince_mur= -(0.52359877559 + 0);local v11={};v11.us_channels={us1=0,us2=0 + 0 ,us3=0,us4=0,us5=0,us6=885 -(261 + 624) ,us7=0 -0 ,us8=1080 -(1020 + 60) ,us9=1423 -(630 + 793) ,us10=0};v11.us_angles={us1=36,us2=243 -171 ,us3=511 -403 ,us4=57 + 87 ,us5=619 -439 ,us6=216,us7=1999 -(760 + 987) ,us8=288,us9=2237 -(1789 + 124) ,us10=360};v11.us_timestamp={us1=766 -(745 + 21) ,us2=0,us3=0,us4=0,us5=0,us6=0,us7=0,us8=0,us9=0,us10=0};v11.last_pose={x=0,y=0 + 0 ,theta=0};Queue={};Queue.new=function() return {first=0,last= -1};end;Queue.push=function(v74,v75) local v76=v74.last + (2 -1) ;v74.last=v76;v74[v76]=v75;end;Queue.pop=function(v79) local v80=v79.first;if (v80>v79.last) then error("list is empty");end local v81=v79[v80];v79[v80]=nil;v79.first=v80 + (3 -2) ;return v81;end;Queue.is_empty=function(v84) return v84.first>v84.last ;end;v11.escrall=function(v85,...) local v86=0 + 0 ;local v87;local v88;while true do if (v86==(0 + 0)) then v87,v88=pcall(v85,...);if  not v87 then print(v88);end break;end end end;v11.get_distance=function(v89,v90,v91,v92) return math.sqrt(((v91-v89)^2) + ((v92-v90)^2) );end;v11.is_point_in_circle=function(v93,v94,v95,v96,v97) return v11.get_distance(v93,v94,v95,v96)<=v97 ;end;v11.get_valid_pt=function(v98,v99,v100,v101) local v102,v103=nil,101055 -(87 + 968) ;for v211,v212 in pairs(path_settings.table_coordinates) do local v213=v11.get_distance(v98,v99,v212.x,v212.y);if ((v213<v103) and v11.is_point_in_circle(v212.x,v212.y,v100,v101,config.ENNEMY_RADIUS_MM)) then local v237=0 -0 ;while true do if (v237==(0 + 0)) then v102=v211;v103=v213;break;end end end end return v102;end;v11.reach_closest_waypoint=function(v104,v105,v106,v107) end;v11.update_us_channels=function(v108) local v109=0 -0 ;local v110;while true do if (v109==0) then v110={get_us_readings()};for v249,v250 in pairs(v110) do if (v11.us_channels[v249]~=v250) then v11.us_channels[v249]=v250;v11.us_timestamp[v249]=v108;end end break;end end end;v11.get_opfor_position=function(v111) local v112=0;local v113;local v114;local v115;local v116;local v117;local v118;while true do if (v112==(2 -1)) then v116=101817 -(1703 + 114) ;v117,v118=nil,nil;v112=2;end if ((703 -(376 + 325))==v112) then for v251,v252 in pairs(v11.us_channels) do if ((v111-v11.us_timestamp[v251])<config.US_DECAY_TIME_MS) then local v275=v11.us_angles[v251];local v276=v113 + (v252 * math.cos(v115 + v275 )) ;local v277=v114 + (v252 * math.sin(v115 + v275 )) ;local v278=v11.get_distance(v113,v114,v276,v277);if (v278<v116) then v116=v278;v117,v118=v276,v277;end end end return v117,v118;end if (v112==0) then v11.update_us_channels(v111);v113,v114,v115=get_pose();v112=1;end end end;local v27={};v27.__index=v27;local v29="none";local v30="async";local function v31(v119,v120) if v119 then return v119(table.unpack(v120));end end local function v32(v121) local v122=0 -0 ;local v123;local v124;local v125;local v126;local v127;while true do if (v122==(2 -1)) then function v127(v253,...) local v254=0;while true do if (v254==(1 + 0)) then return false;end if (0==v254) then if (v253.asyncState==v29) then v123,v124=v253:can(v121);v125=v253.current;v126={v253,v121,v125,v124,...};if  not v123 then return false;end v253.currentTransitioningEvent=v121;local v292=v31(v253["onbefore"   .. v121 ],v126);local v293=v31(v253["onleave"   .. v125 ],v126);if ((v292==false) or (v293==false)) then return false;end v253.asyncState=v121   .. "WaitingOnLeave" ;if (v293~=v30) then v127(v253,...);end return true;elseif (v253.asyncState==(v121   .. "WaitingOnLeave")) then v253.current=v124;local v296=v31(v253["onenter"   .. v124 ] or v253["on"   .. v124 ] ,v126);v253.asyncState=v121   .. "WaitingOnEnter" ;if (v296~=v30) then v127(v253,...);end return true;elseif (v253.asyncState==(v121   .. "WaitingOnEnter")) then local v299=0 -0 ;while true do if (v299==(1 + 0)) then v253.asyncState=v29;v253.currentTransitioningEvent=nil;v299=1182 -(1123 + 57) ;end if (v299==(2 + 0)) then return true;end if (v299==(254 -(163 + 91))) then v31(v253["onafter"   .. v121 ] or v253["on"   .. v121 ] ,v126);v31(v253['onstatechange'],v126);v299=1931 -(1869 + 61) ;end end elseif (string.find(v253.asyncState,"WaitingOnLeave") or string.find(v253.asyncState,"WaitingOnEnter")) then local v300=0;while true do if (v300==(0 + 0)) then v253.asyncState=v29;v127(v253,...);v300=1;end if (v300==1) then return true;end end end v253.currentTransitioningEvent=nil;v254=3 -2 ;end end end return v127;end if (v122==(0 -0)) then v123,v124,v125,v126=nil;v127=nil;v122=1 + 0 ;end end end local function v33(v128,v129) if (type(v129.from)=="string") then v128[v129.from]=v129.to;else for v238,v239 in ipairs(v129.from) do v128[v239]=v129.to;end end end v27.create=function(v130) assert(v130.events);local v131={};setmetatable(v131,v27);v131.options=v130;v131.current=v130.initial or "none" ;v131.asyncState=v29;v131.events={};for v214,v215 in ipairs(v130.events or {} ) do local v216=v215.name;v131[v216]=v131[v216] or v32(v216) ;if (v131.events[v216]==nil) then v131.events[v216]={map={}};end v33(v131.events[v216].map,v215);end for v218,v219 in pairs(v130.callbacks or {} ) do v131[v218]=v219;end return v131;end;v27.is=function(v136,v137) return v136.current==v137 ;end;v27.can=function(v138,v139) local v140=0 -0 ;local v141;local v142;while true do if (v140==(1 + 0)) then return v142~=nil ,v142;end if ((1474 -(1329 + 145))==v140) then v141=v138.events[v139];v142=(v141 and v141.map[v138.current]) or v141.map["*"] ;v140=972 -(140 + 831) ;end end end;v27.cannot=function(v143,v144) return  not v143:can(v144);end;v27.todot=function(v145,v146) local v147=io.open(v146,"w");v147:write("digraph {\n");local v148=function(v221,v222,v223) v147:write(string.format("%s -> %s [label=%s];\n",v222,v223,v221));end;for v224,v225 in pairs(v145.options.events) do if (type(v225.from)=="table") then for v255,v256 in ipairs(v225.from) do v148(v225.name,v256,v225.to);end else v148(v225.name,v225.from,v225.to);end end v147:write("}\n");v147:close();end;v27.transition=function(v149,v150) if (v149.currentTransitioningEvent==v150) then return v149[v149.currentTransitioningEvent](v149);end end;v27.cancelTransition=function(v151,v152) if (v151.currentTransitioningEvent==v152) then v151.asyncState=v29;v151.currentTransitioningEvent=nil;end end;v27.NONE=v29;v27.ASYNC=v30;local v43={};v43.__index=v43;v43.Recovery={CNL={},PUSHBCK={},WAIT_2S={}};v43.recovery_method=v43.Recovery.CNL;v43.destination={};v43.end_scan_stamp=nil;v43.timer={};v43.timer.set=function(v153,v154,v155) v43.timer.start=v153;v43.timer.duration_left=v154;v43.timer.callback=v155 or nil ;end;v43.timer.is_done=function(v159) if ((v159-v43.timer.start)>v43.timer.duration_left) then local v236=0;while true do if (v236==0) then if (v43.timer.callback~=nil) then v43.timer.callback();v43.timer.start=nil;v43.timer.duration_left=nil;v43.timer.callback=nil;end return true;end end else return false;end end;v43.movement_state=v27.create({initial="done",events={{name="move_safe",from={"done","recovering"},to="moving_safe"},{name="move_blind",from={"done","recovering"},to="moving_blind"},{name="set_done",from={"moving_blind","moving_safe"},to="done"},{name="stop",from="moving_safe",to="stopped"},{name="wait_bck_cnl",from="stopped",to="full_recovering"},{name="cnl",from="stopped",to="canceled"}}});v43.get_wpt_coords=function(v160) if (path_settings.table_coordinates[v160]==nil) then error("state.get_wpt_coords: invalid waypoint : "   .. tostring(v160) );end return path_settings.table_coordinates[v160].x,path_settings.table_coordinates[v160].y;end;v43.movement_state.onmove_safe=function(v161,v162,v163,v164,v165,v166,v167) local v168=0 -0 ;while true do if (v168==(1206 -(696 + 510))) then v43.destination.x=v165;v43.destination.y=v166;v168=1 -0 ;end if (v168==(1263 -(1091 + 171))) then v43.destination.theta=v167;set_pose(v165,v166,v167,true);break;end end end;v43.movement_state.onmove_blind=function(v169,v170,v171,v172,v173,v174,v175) v43.destination.x=v173;v43.destination.y=v174;v43.destination.theta=v175;set_pose(v173,v174,v175,false);end;v43.movement_state.onset_stopped=function(v179,v180,v181,v182,v183) scan_channels(tonumber("1111111111",1 + 1 ));v43.end_scan_stamp=v183 + config.SCAN_DURATION_MS ;end;v43.movement_state.onscan_over=function(v185,v186,v187,v188,v189) v43.movement_state:move_safe(v43.destination.x,v43.destination.y,v43.destination.theta);end;v43.action_state=v27.create({initial="idle",events={{name="scan_and_wait_inf",from="idle",to="scanning"},{name="end_scan",from="scanning",to="idle"},{name="do_nothing",from="*",to="idle"},{name="move_S1",from="*",to="sticking_wall_S1"},{name="follow_wall_S1",from="*",to="following_wall_S1"}}});v43.actions={};v43.action_state.onmove_S1=function(v190,v191,v192,v193,v194) local v195=0 + 0 ;local v196;local v197;while true do if (v195==(1 + 0)) then v196,v197=v43.get_wpt_coords("S1");v43.movement_state:move_safe(v196,v197,config.theta_pince_mur);v195=838 -(660 + 176) ;end if (v195==2) then v43.movement_state.on_stopped=function(v257,v258,v259,v260) v43.movement_state:wait_bck_cnl();end;v43.movement_state.ondone=function(v261,v262,v263,v264) local v265=0;local v266;local v267;local v268;local v269;while true do if (v265==(0 + 0)) then v266,v267=get_pose();v268,v269=v266,config.ROBOT_CENTER_Y_BOTTOM-config.OVERSHOOT_MM ;v265=1;end if (v265==(203 -(14 + 188))) then v43.movement_state:move_blind(v268,v269,config.theta_pince_mur-((675.1 -(534 + 141)) * (1 + 0)) );v43.movement_state.ondone=function(v285,v286,v287,v288) local v289=0 + 0 ;while true do if (v289==(0 + 0)) then v43.action_state:follow_wall_S1();v43.movement_state.ondone=nil;break;end end end;break;end end end;break;end if (v195==(0 -0)) then print("beg act_solar_S1_to_S1_init");move_servo(1 -0 ,8415 -5415 );v195=1 + 0 ;end end end;v43.action_state.onfollow_wall_S1=function(v198,v199,v200,v201) v43.movement_state.onstopped=function(v226,v227,v228,v229) v43.movement_state:cnl();end;end;v43.actions.following_wall_S1={};v43.actions.following_wall_S1.start_stamp=nil;v43.actions.following_wall_S1.panel_count=0;v43.actions.following_wall_S1.left_contactor=0 + 0 ;v43.actions.following_wall_S1.loop=function(v203) if (get_button(101)==true) then move_servo(397 -(115 + 281) ,13956 -7956 );end end;v43.action_order={};v43.action_order[1]=v43.action_state.move_S1;v43.loop=function(v204) local v205=0;while true do if (v205==(2 + 0)) then for v270,v271 in pairs(v43.actions) do if (v43.action_state.current==v270) then if (v271.loop~=nil) then v271.loop();else print("strange_behaviour for action_state");end end end break;end if ((2 -1)==v205) then if ((v43.movement_state.current=="stopped") and (v204>v43.end_scan_stamp)) then v43.movement_state:scan_over(v204);end if (v43.action_state.current=="idle") then if ((v43.action_order[3 -2 ]~=nil) or true) then local v284=867 -(550 + 317) ;while true do if (v284==(0 -0)) then print("dequeuing action "   .. tostring(v43.action_order[1]) );table.remove(v43.action_order,1 -0 )(v43.action_state,v204);break;end end end end v205=2;end if (v205==(0 -0)) then if (v43.timer.duration_left~=nil) then v43.timer.is_done(v204);end if is_motion_done() then v43.movement_state:set_done(v204);end v205=286 -(134 + 151) ;end end end;x_initial,y_initial,theta_initial=path_settings.table_coordinates.INI.x,path_settings.table_coordinates.INI.y,1665 -(970 + 695) ;main_loop=nil;is_right=nil;start_time=nil;test_function_done=false;function on_init(v206) is_right=v206;overwrite_pose(x_initial,y_initial,theta_initial);move_servo(1 -0 ,7990 -(582 + 1408) );print("init done ! ");end function on_loop(v207) local v208=0 -0 ;while true do if (v208==(1 -0)) then return config.DEFAULT_LOOP_PERIOD_MS;end if (v208==(0 -0)) then if (start_time==nil) then start_time=v207;end v43.loop(v207);v208=1;end end end function create_coroutine() main_loop=coroutine.create(function(v230) local v231=0;while true do if (v231==0) then start_time=v230;while true do if ((v230-start_time)>config.MATCH_DURATION_MS) then on_end();break;end sleep_period=on_loop(v230);v230=coroutine.yield(sleep_period);end break;end end end);end function resume_loop(v209) local v210=1824 -(1195 + 629) ;while true do if (0==v210) then if (main_loop==nil) then create_coroutine();end status,value=coroutine.resume(main_loop,v209);v210=1 -0 ;end if ((242 -(187 + 54))==v210) then if (coroutine.status(main_loop)=="dead") then local v272=780 -(162 + 618) ;while true do if (v272==0) then print("lua script crashed at : ");print(tostring(value));v272=1 + 0 ;end if ((1 + 0)==v272) then print(debug.traceback(main_loop));main_loop= -(3 -1);v272=2 -0 ;end if (v272==(1 + 1)) then return  -(1638 -(1373 + 263));end end end return value;end end end function on_end() print("Score: 0");end